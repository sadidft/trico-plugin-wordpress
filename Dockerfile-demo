# ============================================
# TRICO AI ASSISTANT - DEMO DOCKERFILE
# 
# Ini adalah contoh Dockerfile untuk mencoba
# Trico AI Assistant di WordPress standalone.
# 
# Untuk production di HF Spaces, gunakan
# Dockerfile utama yang mengambil dari GitHub.
# ============================================

FROM wordpress:latest

# System dependencies
RUN apt-get update && apt-get install -y \
    unzip wget curl git zip \
    && rm -rf /var/lib/apt/lists/*

# PHP Configuration
RUN echo 'memory_limit=512M' >> /usr/local/etc/php/conf.d/memory.ini && \
    echo 'upload_max_filesize=100M' >> /usr/local/etc/php/conf.d/uploads.ini && \
    echo 'post_max_size=100M' >> /usr/local/etc/php/conf.d/uploads.ini && \
    echo 'max_execution_time=300' >> /usr/local/etc/php/conf.d/timeout.ini

# Create directories
RUN mkdir -p /var/www/html/wp-content/plugins \
             /var/www/html/wp-content/themes \
             /var/www/html/wp-content/mu-plugins \
             /var/www/html/wp-content/uploads

# Clone Trico from GitHub
RUN git clone --depth 1 https://github.com/sadidft/trico-plugin-wordpress.git /tmp/trico && \
    cp -r /tmp/trico/trico-theme /var/www/html/wp-content/themes/ && \
    cp -r /tmp/trico/trico-ai-assistant /var/www/html/wp-content/plugins/ && \
    cp -r /tmp/trico/mu-plugins/* /var/www/html/wp-content/mu-plugins/ && \
    rm -rf /tmp/trico

# Permissions
RUN chown -R www-data:www-data /var/www/html/wp-content

# ============================================
# ENVIRONMENT VARIABLES (Set these!)
# ============================================
# Required for Trico to work:
#
# GROQ_KEY_1=gsk_your_groq_api_key
# CF_API_TOKEN=your_cloudflare_api_token  
# CF_ACCOUNT_ID=your_cloudflare_account_id
# TRICO_DOMAIN=your-domain.com
#
# Optional for B2 storage:
# B2_KEY_ID=your_b2_key
# B2_APP_KEY=your_b2_app_key
# B2_BUCKET_ID=your_bucket_id
# B2_BUCKET_NAME=your_bucket_name
# ============================================

EXPOSE 80